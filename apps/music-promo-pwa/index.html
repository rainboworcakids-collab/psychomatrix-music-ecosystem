<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psychomatrix Music Creator - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4f46e5">
    <meta name="description" content="‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏ü‡∏£‡∏µ 1 ‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô">
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" href="icons/icon-72x72.png" type="image/png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&family=Sarabun:wght@300;400;500&display=swap" rel="stylesheet">

    <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏° meta tags ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Psychomatrix Music">
    
    <!-- ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö iOS -->
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Android -->
    <meta name="application-name" content="Psychomatrix Music">
    <meta name="msapplication-TileColor" content="#4f46e5">
    <meta name="msapplication-starturl" content="/">
    
    <!-- Open Graph ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ä‡∏£‡πå -->
    <meta property="og:title" content="Psychomatrix Music Creator">
    <meta property="og:description" content="‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
    <meta property="og:image" content="https://rainboworcakids-collab.github.io/psychomatrix-music-ecosystem/apps/music-promo-pwa/assets/logo.png">
    <meta property="og:url" content="https://rainboworcakids-collab.github.io/psychomatrix-music-ecosystem/apps/music-promo-pwa/">
    <meta property="og:type" content="website">
</head>

<body>
    <!-- Install PWA Banner -->
    <div id="installBanner" class="install-banner">
        <div class="banner-content">
            <span>‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô!</span>
            <button id="installButton" class="install-btn">‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á</button>
            <button id="dismissBanner" class="dismiss-btn">‡∏õ‡∏¥‡∏î</button>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="assets/logo.png" alt="Psychomatrix Music Logo" class="logo-img">
                <h1 class="logo-text">Psychomatrix Music</h1>
            </div>
            <div class="header-actions">
                <button id="themeToggle" class="theme-toggle" aria-label="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°">
                    <i class="fas fa-moon"></i>
                </button>
                <button id="installBtn" class="install-btn-small" aria-label="‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ">
                    <i class="fas fa-download"></i>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h2 class="hero-title">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                    <p class="hero-subtitle">‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß</p>
                    
                    <div class="counter-badge">
                        <i class="fas fa-music"></i>
                        <span>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å <span id="dailyCounter">1</span> ‡πÄ‡∏û‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
                    </div>
                </div>
            </section>

            <!-- Music Creation Form -->
            <section class="form-section">
                <div class="card">
                    <h3 class="card-title">‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á</h3>
                    
                    <form id="musicForm">
                        <div class="form-group">
                            <label for="fullName">
                                <i class="fas fa-user"></i> ‡∏ä‡∏∑‡πà‡∏≠-‡∏™‡∏Å‡∏∏‡∏•
                            </label>
                            <input 
                                type="text" 
                                id="fullName" 
                                placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ"
                                required
                                maxlength="50"
                            >
                        </div>

                        <div class="form-group">
                            <label for="birthDate">
                                <i class="fas fa-calendar"></i> ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î
                            </label>
                            <input 
                                type="date" 
                                id="birthDate" 
                                required
                            >
                        </div>

                        <div class="form-group">
                            <label for="birthTime">
                                <i class="fas fa-clock"></i> ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)
                            </label>
                            <input 
                                type="time" 
                                id="birthTime"
                            >
                        </div>

                        <div class="form-group">
                            <label for="musicStyle">
                                <i class="fas fa-sliders-h"></i> ‡πÅ‡∏ô‡∏ß‡πÄ‡∏û‡∏•‡∏á
                            </label>
                            <select id="musicStyle">
                                <option value="lofi">Lo-fi Beats (‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢)</option>
                                <option value="chill">Chill / Ambient (‡∏ä‡∏¥‡∏•‡∏•‡πå)</option>
                                <option value="study">Study / Focus (‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡πÇ‡∏ü‡∏Å‡∏±‡∏™)</option>
                                <option value="relax">Relax / Meditation (‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢/‡∏™‡∏°‡∏≤‡∏ò‡∏¥)</option>
                            </select>
                        </div>

                        <div class="terms-checkbox">
                            <input type="checkbox" id="agreeTerms" required>
                            <label for="agreeTerms">
                                ‡∏â‡∏±‡∏ô‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏ü‡∏£‡∏µ 1 ‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô
                            </label>
                        </div>

                        <button type="submit" id="generateBtn" class="generate-btn">
                            <i class="fas fa-magic"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô (‡∏ü‡∏£‡∏µ!)
                        </button>
                    </form>
                </div>
            </section>

            <!-- Result Section -->
            <section id="resultSection" class="result-section hidden">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-music"></i> ‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß!
                    </h3>
                    
                    <div class="music-info">
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á</span>
                                <span id="songTitle" class="info-value">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">‡∏Ñ‡∏µ‡∏¢‡πå</span>
                                <span id="songKey" class="info-value">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</span>
                                <span id="songTempo" class="info-value">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</span>
                                <span id="songPattern" class="info-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Visualizer -->
                    <div class="visualizer-container">
                        <div class="visualizer-header">
                            <h4>Visualizer</h4>
                            <div id="playbackStatus" class="playback-status hidden">
                                <div class="pulse-dot"></div>
                                <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô...</span>
                            </div>
                        </div>
                        <div id="visualizer" class="visualizer">
                            <div id="visualizerBars" class="visualizer-bars"></div>
                        </div>
                    </div>

                    <!-- Melody Preview -->
                    <div class="melody-preview">
                        <h4>‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏ô‡πâ‡∏ï</h4>
                        <div id="melodyNotes" class="melody-notes">
                            <!-- ‡πÇ‡∏ô‡πâ‡∏ï‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </div>
                    </div>

                    <!-- Player Controls -->
                    <div class="player-controls">
                        <button id="playBtn" class="control-btn play-btn">
                            <i class="fas fa-play"></i> ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á
                        </button>
                        <button id="stopBtn" class="control-btn stop-btn">
                            <i class="fas fa-stop"></i> ‡∏´‡∏¢‡∏∏‡∏î
                        </button>
                        <button id="saveBtn" class="control-btn save-btn">
                            <i class="fas fa-download"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                        </button>
                    </div>

                    <!-- Share Section -->
                    <div class="share-section">
                        <p>‡πÅ‡∏ä‡∏£‡πå‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</p>
                        <div class="share-buttons">
                            <button id="copyLinkBtn" class="share-btn">
                                <i class="fas fa-link"></i> ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå
                            </button>
                            <button id="shareBtn" class="share-btn">
                                <i class="fas fa-share-alt"></i> ‡πÅ‡∏ä‡∏£‡πå
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Upgrade Section -->
            <section class="upgrade-section">
                <div class="card premium-card">
                    <div class="premium-badge">
                        <i class="fas fa-crown"></i> Premium
                    </div>
                    <h3 class="card-title">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 1 ‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô?</h3>
                    <p class="premium-desc">
                        ‡∏≠‡∏±‡∏û‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô Premium ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
                    </p>
                    
                    <div class="pricing-grid">
                        <div class="pricing-tier">
                            <h4>Donor</h4>
                            <div class="price">99‡∏ø<span>/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></div>
                            <ul class="features">
                                <li><i class="fas fa-check"></i> 3 ‡πÄ‡∏û‡∏•‡∏á/‡∏ß‡∏±‡∏ô</li>
                                <li><i class="fas fa-check"></i> ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏µ</li>
                                <li><i class="fas fa-check"></i> ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤</li>
                            </ul>
                            <button class="upgrade-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏ô‡∏µ‡πâ</button>
                        </div>
                        
                        <div class="pricing-tier featured">
                            <div class="popular-badge">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                            <h4>Patron</h4>
                            <div class="price">199‡∏ø<span>/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</span></div>
                            <ul class="features">
                                <li><i class="fas fa-check"></i> ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏û‡∏•‡∏á</li>
                                <li><i class="fas fa-check"></i> ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</li>
                                <li><i class="fas fa-check"></i> ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ñ‡∏£‡∏ö</li>
                                <li><i class="fas fa-check"></i> Support ‡∏û‡∏¥‡πÄ‡∏®‡∏©</li>
                            </ul>
                            <button class="upgrade-btn primary">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Ñ‡πÄ‡∏Å‡∏à‡∏ô‡∏µ‡πâ</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="features-section">
                <h3 class="section-title">‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á Psychomatrix Music?</h3>
                <div class="features-grid">
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-user-secret"></i>
                        </div>
                        <h4>‡πÄ‡∏≠‡∏Å‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß</h4>
                        <p>‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡πÉ‡∏Ñ‡∏£</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h4>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</h4>
                        <p>‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏≠‡∏õ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡πÑ‡∏•‡∏ô‡πå‡πÑ‡∏î‡πâ</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h4>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï</h4>
                        <p>‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏ö‡∏≥‡∏ö‡∏±‡∏î‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÇ‡∏ü‡∏Å‡∏±‡∏™</p>
                    </div>
                </div>
            </section>
            
            <!-- Debug Section for Testing -->
            <section id="Debug-Section">
                <div class="card debug-card">
                    <h3 class="card-title">
                        <i class="fas fa-bug"></i> ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤
                    </h3>
                    
                    <div class="debug-actions">
                        <button onclick="resetDailyCounter()" class="debug-btn">
                            üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ß‡∏±‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
                        </button>
                        <button onclick="testAudio()" class="debug-btn">
                            üîä ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á
                        </button>
                        <button onclick="simulateInstallPrompt()" class="debug-btn">
                            üì≤ ‡∏à‡∏≥‡∏•‡∏≠‡∏á Install Prompt
                        </button>
                        <button onclick="clearAllData()" class="debug-btn">
                            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>
                        <button onclick="togglePWADebug()" class="debug-btn">
                            üêõ ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î PWA Debug Panel
                        </button>
                        <button onclick="testPWAInstall()" class="debug-btn">
                            üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö PWA Install
                        </button>

                    </div>
                    
                    <div class="debug-status">
                        <h4>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö:</h4>
                        <div class="status-grid">
                            <div class="status-item">
                                <span class="status-label">‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ß‡∏±‡∏ô:</span>
                                <span id="debugDailyCounter" class="status-value">-</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Audio Context:</span>
                                <span id="debugAudioStatus" class="status-value">-</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Service Worker:</span>
                                <span id="debugSWStatus" class="status-value">-</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">PWA Installable:</span>
                                <span id="debugPWAStatus" class="status-value">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="assets/logo.png" alt="Logo" class="footer-logo-img">
                    <span>Psychomatrix Music</span>
                </div>
                
                <div class="footer-links">
                    <a href="#" class="footer-link">‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
                    <a href="#" class="footer-link">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
                    <a href="#" class="footer-link">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
                </div>
                
                <div class="footer-copy">
                    &copy; 2024 Psychomatrix Music. All rights reserved.
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Modal -->
    <div id="loadingModal" class="modal hidden">
        <div class="modal-content">
            <div class="loading-spinner"></div>
            <h3>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á...</h3>
            <p id="loadingMessage">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏°‡πÇ‡∏•‡∏î‡∏µ‡πâ</p>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast hidden">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</span>
    </div>

    <!-- Error Toast -->
    <div id="errorToast" class="toast error hidden">
        <i class="fas fa-exclamation-circle"></i>
        <span id="errorMessage">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</span>
    </div>

    <!-- PWA Debug Panel -->
    <div id="pwaDebugPanel" class="pwa-debug-panel">
        <div class="debug-header">
            <h4>üîß PWA Debug Panel</h4>
            <button onclick="togglePWADebug()" class="debug-close">√ó</button>
        </div>
        <div class="debug-content">
            <div class="debug-section">
                <h5>üì± Installation Status</h5>
                <div id="pwaStatus"></div>
            </div>
            <div class="debug-section">
                <h5>üîß Debug Tools</h5>
                <button onclick="testInstallPrompt()" class="debug-btn">
                    üß™ Test Install Prompt
                </button>
                <button onclick="clearPWAStorage()" class="debug-btn">
                    üóëÔ∏è Clear PWA Data
                </button>
                <button onclick="showInstallPrompt()" class="debug-btn">
                    üì≤ Force Show Install
                </button>
            </div>
        </div>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î Debug Panel -->
    <button onclick="togglePWADebug()" class="debug-toggle-btn">
        üêõ
    </button>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/music-core.js"></script>
    <script src="js/music-generator.js"></script>
    <script src="js/pwa-handler.js"></script>
    
    <!-- Debug Functions -->
    <script>
        // ========== DEBUG FUNCTIONS ==========
        function resetDailyCounter() {
            if (window.AppState) {
                window.AppState.dailyCounter = 3;
                localStorage.setItem('dailyCounter', window.AppState.dailyCounter);
                if (window.updateDailyCounter) {
                    window.updateDailyCounter();
                }
                if (window.showToast) {
                    window.showToast('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô 3 ‡πÅ‡∏•‡πâ‡∏ß!', 'success');
                }
            }
        }

        function testAudio() {
            if (window.MusicCore && window.MusicCore.requestAudioPermission) {
                window.MusicCore.requestAudioPermission().then(success => {
                    if (success) {
                        window.MusicCore.playTone(440, 0.5);
                        if (window.showToast) {
                            window.showToast('‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (A4)', 'success');
                        }
                    } else {
                        if (window.showError) {
                            window.showError('‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á');
                        }
                    }
                });
            } else {
                if (window.showError) {
                    window.showError('MusicCore module ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
                }
            }
        }

        function simulateInstallPrompt() {
            console.log('üß™ Simulating install prompt...');
            if (window.PWAHandler && window.PWAHandler.simulateInstallPrompt) {
                window.PWAHandler.simulateInstallPrompt();
            } else if (window.simulateInstallPrompt) {
                window.simulateInstallPrompt();
            } else {
                alert('‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô simulateInstallPrompt ‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
            }
        }

        function clearAllData() {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                localStorage.clear();
                sessionStorage.clear();
                
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.getRegistrations().then(registrations => {
                        registrations.forEach(registration => {
                            registration.unregister();
                        });
                    });
                }
                
                setTimeout(() => {
                    location.reload();
                }, 1000);
                
                alert('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤...');
            }
        }

        function togglePWADebug() {
            const panel = document.getElementById('pwaDebugPanel');
            if (panel) {
                panel.classList.toggle('show');
                updatePWAStatus();
            }
        }

        function updatePWAStatus() {
            const statusDiv = document.getElementById('pwaStatus');
            if (!statusDiv) return;
            
            const status = {
                deferredPrompt: !!window.deferredPrompt,
                isStandalone: window.matchMedia('(display-mode: standalone)').matches,
                pwaInstalled: localStorage.getItem('pwa_installed'),
                hideBanner: localStorage.getItem('hideInstallBanner'),
                userAgent: navigator.userAgent.substring(0, 50)
            };
            
            statusDiv.textContent = JSON.stringify(status, null, 2);
        }

        function testInstallPrompt() {
            console.log('üß™ Testing install prompt...');
            if (window.PWAHandler && window.PWAHandler.simulateInstallPrompt) {
                window.PWAHandler.simulateInstallPrompt();
            } else {
                console.log('No PWAHandler available');
            }
        }

        function clearPWAStorage() {
            if (confirm('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• PWA ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')) {
                localStorage.removeItem('pwa_installed');
                localStorage.removeItem('hideInstallBanner');
                localStorage.removeItem('pwa_install_date');
                alert('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }

        function showInstallPrompt() {
            if (window.deferredPrompt) {
                window.deferredPrompt.prompt();
            } else if (window.PWAHandler && window.PWAHandler.install) {
                window.PWAHandler.install();
            } else {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ install prompt ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
            }
        }
        
        function testPWAInstall() {
            console.log('üß™ Testing PWA installation...');
    
            // 1. ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤ localStorage ‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô banner
            localStorage.removeItem('hideInstallBanner');
            localStorage.removeItem('pwa_installed');
    
            // 2. ‡∏™‡∏£‡πâ‡∏≤‡∏á mock deferred prompt ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
            if (!window.deferredPrompt) {
                console.log('Creating mock deferred prompt...');
                // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ simulateInstallPrompt ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
                if (typeof window.simulateInstallPrompt === 'function') {
                    window.simulateInstallPrompt();
                } else if (window.PWAHandler && window.PWAHandler.simulateInstallPrompt) {
                    window.PWAHandler.simulateInstallPrompt();
                } else {
                    alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô simulateInstallPrompt');
                    return;
                }
            }
    
            // 3. ‡πÅ‡∏™‡∏î‡∏á banner ‡πÅ‡∏•‡∏∞‡∏õ‡∏∏‡πà‡∏°
            const banner = document.getElementById('installBanner');
            const installBtn = document.getElementById('installBtn');
    
            if (banner) {
                banner.classList.add('show');
            }
    
            if (installBtn) {
                installBtn.style.display = 'flex';
            }
    
            // 4. ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            if (typeof updatePWAStatus === 'function') {
                updatePWAStatus();
            }
    
            // 5. ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            if (typeof showToast === 'function') {
                showToast('PWA installation test ready! Click install buttons', 'info');
            } else {
                alert('PWA installation test ready! Click install buttons');
            }
        }


        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Register service worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registered:', registration);
                    })
                    .catch(error => {
                        console.log('ServiceWorker registration failed:', error);
                    });
            }
        });
        
    </script>

    <!-- Additional Styles for Debug Section -->
    <style>
        /* Debug Section Styles */
        .debug-card {
            background: linear-gradient(135deg, #1f2937, #111827);
            color: white;
            border: 2px solid #4f46e5;
        }
        
        .debug-card .card-title {
            color: #fbbf24;
        }
        
        .debug-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .debug-btn {
            padding: 10px 16px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 200px;
        }
        
        .debug-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
        }
        
        .debug-status {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        .status-label {
            font-weight: 500;
            color: #9ca3af;
        }
        
        .status-value {
            font-weight: 600;
            color: #fbbf24;
            font-family: 'Courier New', monospace;
        }
        
        /* PWA Debug Panel Styles */
        .pwa-debug-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            background: #1f2937;
            color: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 9998;
            display: none;
            font-family: 'Sarabun', sans-serif;
        }

        .pwa-debug-panel.show {
            display: block;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .debug-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: #374151;
            border-radius: 8px 8px 0 0;
        }

        .debug-header h4 {
            margin: 0;
            font-size: 14px;
            font-weight: 600;
        }

        .debug-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .debug-content {
            padding: 16px;
        }

        .debug-section {
            margin-bottom: 16px;
        }

        .debug-section h5 {
            margin: 0 0 8px 0;
            font-size: 12px;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #pwaStatus {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            background: #111827;
            padding: 8px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
        }

        /* ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î Debug Panel */
        .debug-toggle-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: #4f46e5;
            color: white;
            border: none;
            font-size: 18px;
            cursor: pointer;
            z-index: 9997;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .debug-toggle-btn:hover {
            background: #4338ca;
            transform: scale(1.1);
        }
        
        /* Responsive Styles */
        @media (max-width: 768px) {
            .debug-actions {
                flex-direction: column;
            }
            
            .debug-btn {
                min-width: 100%;
            }
            
            .pwa-debug-panel {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</body>
</html>